"use strict";var u=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var S=(t,e)=>{for(var o in e)u(t,o,{get:e[o],enumerable:!0})},x=(t,e,o,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of v(e))!y.call(t,r)&&r!==o&&u(t,r,{get:()=>e[r],enumerable:!(s=m(e,r))||s.enumerable});return t};var d=t=>x(u({},"__esModule",{value:!0}),t);var w={};S(w,{createNodeSQLiteExecutor:()=>h});module.exports=d(w);function h(t){return{execute:e=>{let{parameters:o,sql:s,transformations:r}=e,f=t.prepare(s);try{let n=f.all(...o);if(!r||Object.keys(r).length===0)return Promise.resolve([null,n]);for(let i of n)for(let a in r){let l=r[a],c=i[a];if(l==="json-parse"){if(typeof c=="string")try{i[a]=JSON.parse(c)}catch(p){console.error(`Failed to JSON.parse column "${a}" with value: ${c}`,p)}continue}}return Promise.resolve([null,n])}catch(n){return Promise.resolve([n])}}}}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vZGF0YS9ub2RlLXNxbGl0ZS9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBEYXRhYmFzZVN5bmMsIFNRTElucHV0VmFsdWUgfSBmcm9tIFwibm9kZTpzcWxpdGVcIjtcblxuaW1wb3J0IHR5cGUgeyBFeGVjdXRvciB9IGZyb20gXCIuLi9leGVjdXRvclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTm9kZVNRTGl0ZUV4ZWN1dG9yKGRhdGFiYXNlOiBEYXRhYmFzZVN5bmMpOiBFeGVjdXRvciB7XG4gIHJldHVybiB7XG4gICAgZXhlY3V0ZTogKHF1ZXJ5KSA9PiB7XG4gICAgICBjb25zdCB7IHBhcmFtZXRlcnMsIHNxbCwgdHJhbnNmb3JtYXRpb25zIH0gPSBxdWVyeTtcblxuICAgICAgY29uc3Qgc3RhdGVtZW50ID0gZGF0YWJhc2UucHJlcGFyZShzcWwpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByb3dzID0gc3RhdGVtZW50LmFsbCguLi4ocGFyYW1ldGVycyBhcyBTUUxJbnB1dFZhbHVlW10pKTtcblxuICAgICAgICBpZiAoIXRyYW5zZm9ybWF0aW9ucyB8fCBPYmplY3Qua2V5cyh0cmFuc2Zvcm1hdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW251bGwsIHJvd3NdKSBhcyBuZXZlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNvbHVtbiBpbiB0cmFuc2Zvcm1hdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWF0aW9uID0gdHJhbnNmb3JtYXRpb25zW2NvbHVtbl07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJvd1tjb2x1bW5dO1xuXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtYXRpb24gPT09IFwianNvbi1wYXJzZVwiKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgcm93W2NvbHVtbl0gPSBKU09OLnBhcnNlKHZhbHVlKSBhcyBuZXZlcjtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIEpTT04ucGFyc2UgY29sdW1uIFwiJHtjb2x1bW59XCIgd2l0aCB2YWx1ZTogJHt2YWx1ZX1gLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uIHNhdGlzZmllcyB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbbnVsbCwgcm93c10pIGFzIG5ldmVyO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbZXJyb3IgYXMgRXJyb3JdKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuIl0sCiAgIm1hcHBpbmdzIjogInlhQUFBLElBQUFBLEVBQUEsR0FBQUMsRUFBQUQsRUFBQSw4QkFBQUUsSUFBQSxlQUFBQyxFQUFBSCxHQUlPLFNBQVNJLEVBQXlCQyxFQUFrQyxDQUN6RSxNQUFPLENBQ0wsUUFBVUMsR0FBVSxDQUNsQixHQUFNLENBQUUsV0FBQUMsRUFBWSxJQUFBQyxFQUFLLGdCQUFBQyxDQUFnQixFQUFJSCxFQUV2Q0ksRUFBWUwsRUFBUyxRQUFRRyxDQUFHLEVBRXRDLEdBQUksQ0FDRixJQUFNRyxFQUFPRCxFQUFVLElBQUksR0FBSUgsQ0FBOEIsRUFFN0QsR0FBSSxDQUFDRSxHQUFtQixPQUFPLEtBQUtBLENBQWUsRUFBRSxTQUFXLEVBQzlELE9BQU8sUUFBUSxRQUFRLENBQUMsS0FBTUUsQ0FBSSxDQUFDLEVBR3JDLFFBQVdDLEtBQU9ELEVBQ2hCLFFBQVdFLEtBQVVKLEVBQWlCLENBQ3BDLElBQU1LLEVBQWlCTCxFQUFnQkksQ0FBTSxFQUN2Q0UsRUFBUUgsRUFBSUMsQ0FBTSxFQUV4QixHQUFJQyxJQUFtQixhQUFjLENBQ25DLEdBQUksT0FBT0MsR0FBVSxTQUNuQixHQUFJLENBQ0ZILEVBQUlDLENBQU0sRUFBSSxLQUFLLE1BQU1FLENBQUssQ0FDaEMsT0FBU0MsRUFBTyxDQUNkLFFBQVEsTUFBTSxnQ0FBZ0NILENBQU0saUJBQWlCRSxDQUFLLEdBQUlDLENBQUssQ0FDckYsQ0FHRixRQUNGLENBR0YsQ0FHRixPQUFPLFFBQVEsUUFBUSxDQUFDLEtBQU1MLENBQUksQ0FBQyxDQUNyQyxPQUFTSyxFQUFnQixDQUN2QixPQUFPLFFBQVEsUUFBUSxDQUFDQSxDQUFjLENBQUMsQ0FDekMsQ0FDRixDQUNGLENBQ0YiLAogICJuYW1lcyI6IFsibm9kZV9zcWxpdGVfZXhwb3J0cyIsICJfX2V4cG9ydCIsICJjcmVhdGVOb2RlU1FMaXRlRXhlY3V0b3IiLCAiX190b0NvbW1vbkpTIiwgImNyZWF0ZU5vZGVTUUxpdGVFeGVjdXRvciIsICJkYXRhYmFzZSIsICJxdWVyeSIsICJwYXJhbWV0ZXJzIiwgInNxbCIsICJ0cmFuc2Zvcm1hdGlvbnMiLCAic3RhdGVtZW50IiwgInJvd3MiLCAicm93IiwgImNvbHVtbiIsICJ0cmFuc2Zvcm1hdGlvbiIsICJ2YWx1ZSIsICJlcnJvciJdCn0K